<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>App Bundle Analysis</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f7;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    #chart {
      width: 100%;
      max-width: 1160px;
      height: 700px;
      margin: auto;
    }
    h1 {
      color: #1d1d1f;
      margin-top: 0;
      margin-bottom: 20px;
      text-align: center;
    }
    .info-banner {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      background: #f8f8fa;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
    }
    .info-item {
      display: flex;
      flex-direction: column;
    }
    .info-label {
      font-size: 12px;
      color: #666;
      margin-bottom: 4px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .info-value {
      font-size: 16px;
      color: #1d1d1f;
      font-weight: 500;
    }
    .size-info {
      color: #0066cc;
    }
    .tabs {
      margin: 0 0 20px 0;
      border-bottom: 1px solid #e1e1e1;
      display: flex;
      gap: 32px;
      padding: 0 16px;
    }
    .tab {
      padding: 12px 0;
      color: #666;
      cursor: pointer;
      position: relative;
      font-size: 14px;
      font-weight: 500;
      transition: color 0.2s;
      border: none;
      background: none;
      margin: 0;
    }
    .tab:hover {
      color: #000;
    }
    .tab.active {
      color: #0066cc;
    }
    .tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      right: 0;
      height: 2px;
      background: #0066cc;
      border-radius: 2px;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    .insights-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      padding: 20px 0;
    }
    .insight-card {
      background: #f8f8fa;
      border-radius: 8px;
      padding: 16px;
    }
    .insight-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .insight-value {
      font-size: 24px;
      font-weight: 500;
      color: #0066cc;
    }
    .insight-description {
      font-size: 13px;
      color: #666;
      margin-top: 8px;
    }
    .breakdown-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .breakdown-item {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      border-bottom: 1px solid #e1e1e1;
    }
    .breakdown-item:last-child {
      border-bottom: none;
    }
    .breakdown-type {
      width: 120px;
      font-weight: 500;
    }
    .breakdown-bar {
      flex-grow: 1;
      height: 8px;
      background: #e1e1e1;
      border-radius: 4px;
      margin: 0 16px;
      overflow: hidden;
    }
    .breakdown-bar-fill {
      height: 100%;
      background: #0066cc;
      border-radius: 4px;
    }
    .breakdown-size {
      width: 100px;
      text-align: right;
      color: #666;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>App Bundle Analysis</h1>
  <div class="info-banner">
    <div class="info-item">
      <span class="info-label">Name</span>
      <span class="info-value" id="appName">.</span>
    </div>
    <div class="info-item">
      <span class="info-label">Bundle ID</span>
      <span class="info-value" id="bundleId">io.bitrise.rere</span>
    </div>
    <div class="info-item">
      <span class="info-label">Platform</span>
      <span class="info-value" id="platform">iPhoneOS</span>
    </div>
    <div class="info-item">
      <span class="info-label">Version</span>
      <span class="info-value" id="version">6.2</span>
    </div>
    <div class="info-item">
      <span class="info-label">Download Size</span>
      <span class="info-value size-info" id="downloadSize">341.2 KB</span>
    </div>
    <div class="info-item">
      <span class="info-label">Install Size</span>
      <span class="info-value size-info" id="installSize">796.0 KB</span>
    </div>
  </div>
  
  <div class="tabs">
    <button class="tab active" data-tab="overview">Overview</button>
    <button class="tab" data-tab="breakdown">Breakdown</button>
    <button class="tab" data-tab="insights">Insights</button>
  </div>

  <div id="overview" class="tab-content active">
    <div id="chart"></div>
  </div>

  <div id="breakdown" class="tab-content">
    <ul class="breakdown-list" id="typeBreakdown">
      
    </ul>
  </div>

  <div id="insights" class="tab-content">
    <div class="insights-grid">
      <div class="insight-card">
        <div class="insight-title">Largest File</div>
        <div class="insight-value" id="largestFile">-</div>
        <div class="insight-description">The single largest file in the bundle</div>
      </div>
      <div class="insight-card">
        <div class="insight-title">Asset Catalog Size</div>
        <div class="insight-value" id="assetCatalogSize">-</div>
        <div class="insight-description">Total size of .car files</div>
      </div>
      <div class="insight-card">
        <div class="insight-title">Binary Size</div>
        <div class="insight-value" id="binarySize">-</div>
        <div class="insight-description">Total size of binary files</div>
      </div>
      <div class="insight-card">
        <div class="insight-title">Resource Files</div>
        <div class="insight-value" id="resourceCount">-</div>
        <div class="insight-description">Number of resource files</div>
      </div>
    </div>
  </div>
</div>
<script>
const fileTree = {"relative_path":".","size":733280,"shasum":"ea685de7c45ac70ddb8419382de5bcac697ce4abb0ace0cbbb617257c3f5b849","type":"directory","children":[{"relative_path":"AppIcon60x60@2x.png","size":4441,"shasum":"9a541149057be7740b2c1e86a4d212c1c9fb5aee4bbfd348f019d6fe2b9ee131","type":"binary"},{"relative_path":"AppIcon76x76@2x~ipad.png","size":5604,"shasum":"9ace38f6d44ee608d0532f836a157c5123de4e7c52d16f5fd75a82f725c93201","type":"binary"},{"relative_path":"Assets.car","size":130399,"shasum":"067921892f2b3a30f79024a6b02d6c9ccbccc62f2e800f18cd2bcb4ec780a543","type":"asset_catalog","children":[{"relative_path":"Assets.car/first","size":3337,"shasum":"","type":"image","children":[{"relative_path":"Assets.car/first/first.pdf @ 1x (universal)","size":330,"shasum":"33E69A91654B491D7DC01B865434BE7D69BFF8529A4BE0A281E6F9228B4D8CFF","type":"image"},{"relative_path":"Assets.car/first/first.pdf @ 2x (universal)","size":330,"shasum":"0959907448263320867F03B181DE49D76FD2263A253DFDD58362A2C358E3B442","type":"image"},{"relative_path":"Assets.car/first/first.pdf @ 3x (universal)","size":330,"shasum":"6A95B2BE622221FD4754D5AFC7BA74EA5CA1D53222794CF7BD1A5EE1275C0E9B","type":"image"},{"relative_path":"Assets.car/first/first.pdf @ 0x (universal)","size":2347,"shasum":"DF2732F8E9D9903C1587FE0C297FE1EE2BDB885F793509CCB388546A9BC358A5","type":"image"}]},{"relative_path":"Assets.car/second","size":3282,"shasum":"","type":"image","children":[{"relative_path":"Assets.car/second/second.pdf @ 1x (universal)","size":330,"shasum":"11B857B023130EE359F5AD36099418FF0FFE14A823776E8BA1E0E6F5212096CD","type":"image"},{"relative_path":"Assets.car/second/second.pdf @ 2x (universal)","size":330,"shasum":"2E4A8156CACB69316FC8E4AC20F39EDC09C040B07FDCB6F0B50A3BE834E7C70F","type":"image"},{"relative_path":"Assets.car/second/second.pdf @ 3x (universal)","size":330,"shasum":"70BD60A21B3CBE989E3B51C4B84486FD65469941858B268E58D03BEA2F3F3152","type":"image"},{"relative_path":"Assets.car/second/second.pdf @ 0x (universal)","size":2292,"shasum":"FC70D75C4C14F1D4C17854D2B678223247CC2E8339CB0B381CA991055BDF8830","type":"image"}]},{"relative_path":"Assets.car/AppIcon","size":48104,"shasum":"","type":"image","children":[{"relative_path":"Assets.car/AppIcon/20.png @ 1x (pad)","size":334,"shasum":"19C492FFFB5D8C75E2B026E66ED5B5D3B4D38D40D49EA48AF218A56FBBC3EBD6","type":"image"},{"relative_path":"Assets.car/AppIcon/29.png @ 1x (pad)","size":334,"shasum":"C621D0B5431B643F5CB237E4109E639454C3EA9761BD2F6D4017778258D7DA9C","type":"image"},{"relative_path":"Assets.car/AppIcon/40 1.png @ 1x (pad)","size":334,"shasum":"9F145F0EBCE3E2B8093E2EBE45959D179D2C067183333DB825D954E9A4A6B2A8","type":"image"},{"relative_path":"Assets.car/AppIcon/76.png @ 1x (pad)","size":334,"shasum":"027E83C0AC5D85FF3EA6E1864A9A275C8BA8F19B8280717AD17B05199E772562","type":"image"},{"relative_path":"Assets.car/AppIcon/1024.png @ 1x (marketing)","size":36154,"shasum":"FCCB0BF19B3B957ECE50F6E9B9C939E269664B19E127EBD53BA6EC7FEC03E49A","type":"image"},{"relative_path":"Assets.car/AppIcon/40.png @ 2x (phone)","size":334,"shasum":"75FFAD117A062B0315FF8BB4A7685D836B3E4CDC2F8E9B373D17461A0EAC4D29","type":"image"},{"relative_path":"Assets.car/AppIcon/58.png @ 2x (phone)","size":334,"shasum":"8CEAF2B06649EE86E9F91EC87DB2EAB66B3CAA8F1921AD6556A6934C50D62B1E","type":"image"},{"relative_path":"Assets.car/AppIcon/80.png @ 2x (phone)","size":334,"shasum":"E6480129DE92FE5BEA5F4E4F6A7FDEF54EF6A7BC4DB5FA0F08E2488FC0C960C2","type":"image"},{"relative_path":"Assets.car/AppIcon/120 1.png @ 2x (phone)","size":334,"shasum":"5943E7B3DB9D9B9EA61744FF42907FEEE190431F99510008812579681E0BA0DC","type":"image"},{"relative_path":"Assets.car/AppIcon/180.png @ 2x (phone)","size":6256,"shasum":"6D04A752F2FAF47ABF587783792CE66E8512FAF7277F11952931D14BC21EB4A0","type":"image"},{"relative_path":"Assets.car/AppIcon/40 2.png @ 2x (pad)","size":338,"shasum":"12E1ACF2D41B4497609A2BF235C5A5D19547DC73E44EFFF257EF8EDC38C0F543","type":"image"},{"relative_path":"Assets.car/AppIcon/58 1.png @ 2x (pad)","size":338,"shasum":"78150579F73D79F0F14FD2E7AA3F5094041B961370DCFD74822E62BFCF64A84F","type":"image"},{"relative_path":"Assets.car/AppIcon/80 1.png @ 2x (pad)","size":338,"shasum":"0FE04BF2DA4CAD62412D36DD5A0E0FB84C73B6F25B7360A534651C61B6097C7E","type":"image"},{"relative_path":"Assets.car/AppIcon/152.png @ 2x (pad)","size":334,"shasum":"F2A01DD14E9587F9B0813BBBFDDF3CF8376C21FD7F339D82442C81D7E26D2DC6","type":"image"},{"relative_path":"Assets.car/AppIcon/167.png @ 2x (pad)","size":334,"shasum":"526481452AC8D01A298C9FB170B166C997D6B6C9E543BD700938394BC635287B","type":"image"},{"relative_path":"Assets.car/AppIcon/60.png @ 3x (phone)","size":338,"shasum":"90875667E4F22292756509061023DF8DA463AB4C9F7E5C8EFBD1294D5D54146F","type":"image"},{"relative_path":"Assets.car/AppIcon/87.png @ 3x (phone)","size":334,"shasum":"AD9861B1E50F976B8CABAECCCF45C963002E8DE161E7A4EDBD5386D68AFB8794","type":"image"},{"relative_path":"Assets.car/AppIcon/120.png @ 3x (phone)","size":334,"shasum":"5A181B49205BF7384718ADB041755435085995ED37B338475E02D05AED12EFA1","type":"image"},{"relative_path":"Assets.car/AppIcon/180.png @ 3x (phone)","size":334,"shasum":"84D9F533EDADFD6C99A74E09A85B5926CF6EEDEF9800A532BC2DC2AAB4D1308D","type":"image"}]},{"relative_path":"Assets.car/GitHub","size":330,"shasum":"","type":"image","children":[{"relative_path":"Assets.car/GitHub/GitHub-Mark-Light-64px.png @ 2x (universal)","size":330,"shasum":"C80F1F05D09D13A5C62D340E5443B64B4197E155369CA885E5294349D449DDA7","type":"image"}]}]},{"relative_path":"Base.lproj","size":97792,"shasum":"e394197cf388b1cb56ca98623bb43a6fd072acd8b94571c700151e81dda3111d","type":"directory","children":[{"relative_path":"Base.lproj/LaunchScreen.storyboardc","size":2889,"shasum":"6c3458aec127737f7a5edbf7a37a48af41636260ece03c5229c4ffba13e70fd4","type":"directory","children":[{"relative_path":"Base.lproj/LaunchScreen.storyboardc/01J-lp-oVM-view-Ze5-6b-2t3.nib","size":1707,"shasum":"830e8aff1d3b034c8fc6eab39092e733e666fd98d953a2ae0f6e8809c760f38b","type":"binary"},{"relative_path":"Base.lproj/LaunchScreen.storyboardc/Info.plist","size":258,"shasum":"1f255d5cc53b531e3f29a9406a8df49a958e2bf9443d3e20bd8374f707f7d5c8","type":"binary"},{"relative_path":"Base.lproj/LaunchScreen.storyboardc/UIViewController-01J-lp-oVM.nib","size":924,"shasum":"54f3637f671feba5f19e82ec4f4a7fb448bb3cfc0fb180f089aa571fc8f053e2","type":"binary"}]},{"relative_path":"Base.lproj/Main.storyboardc","size":94903,"shasum":"f5cf264970920b7e10e6d37ec8ce1f5a4c5c44176690b10bdc3a964a0523f167","type":"directory","children":[{"relative_path":"Base.lproj/Main.storyboardc/8rJ-Kc-sve-view-QS5-Rx-YEW.nib","size":25526,"shasum":"f34c43a5feffe41d733046efbc214303a2b9fa1f6529eff6dc4d170f970b78fd","type":"directory","children":[{"relative_path":"Base.lproj/Main.storyboardc/8rJ-Kc-sve-view-QS5-Rx-YEW.nib/objects-14.0+.nib","size":12763,"shasum":"0723730b1a2bf541b7c7f86bcee32676a800d93ab9f460f4235b92f17cca7eb5","type":"binary"},{"relative_path":"Base.lproj/Main.storyboardc/8rJ-Kc-sve-view-QS5-Rx-YEW.nib/runtime.nib","size":12763,"shasum":"0723730b1a2bf541b7c7f86bcee32676a800d93ab9f460f4235b92f17cca7eb5","type":"binary"}]},{"relative_path":"Base.lproj/Main.storyboardc/9pv-A4-QxB-view-tsR-hK-woN.nib","size":31766,"shasum":"4d1aa284c35022053056dcfe19d4a88c59045b1844c892bcaeabd386ea696415","type":"directory","children":[{"relative_path":"Base.lproj/Main.storyboardc/9pv-A4-QxB-view-tsR-hK-woN.nib/objects-14.0+.nib","size":15883,"shasum":"305e8225d8c24e55c6154474fd4d04fb09caab6cfc24bf0a338d08e3b4c133b6","type":"binary"},{"relative_path":"Base.lproj/Main.storyboardc/9pv-A4-QxB-view-tsR-hK-woN.nib/runtime.nib","size":15883,"shasum":"305e8225d8c24e55c6154474fd4d04fb09caab6cfc24bf0a338d08e3b4c133b6","type":"binary"}]},{"relative_path":"Base.lproj/Main.storyboardc/CNG-kH-WYO-view-LJl-eX-gQn.nib","size":2450,"shasum":"c73b92f81a19ca52cb03b3ae4701c8dfd6dc350643f722bef008ce76e8b0d8e6","type":"directory","children":[{"relative_path":"Base.lproj/Main.storyboardc/CNG-kH-WYO-view-LJl-eX-gQn.nib/objects-14.0+.nib","size":1225,"shasum":"5cd7eefc1eecc445972294109064ef3853e41f49c1925ec6d4db1b26e8771197","type":"binary"},{"relative_path":"Base.lproj/Main.storyboardc/CNG-kH-WYO-view-LJl-eX-gQn.nib/runtime.nib","size":1225,"shasum":"5cd7eefc1eecc445972294109064ef3853e41f49c1925ec6d4db1b26e8771197","type":"binary"}]},{"relative_path":"Base.lproj/Main.storyboardc/G05-w2-BtH-view-9Vu-NR-tEg.nib","size":24868,"shasum":"e1df7ec510bdc0030422b43fe31907c34e122daf8521547948ca4d7ecf373f93","type":"directory","children":[{"relative_path":"Base.lproj/Main.storyboardc/G05-w2-BtH-view-9Vu-NR-tEg.nib/objects-14.0+.nib","size":12434,"shasum":"0c1fdf3d63fd1d001a7653fe714ed81ddd12ce55a10f4c7a25b550d529130807","type":"binary"},{"relative_path":"Base.lproj/Main.storyboardc/G05-w2-BtH-view-9Vu-NR-tEg.nib/runtime.nib","size":12434,"shasum":"0c1fdf3d63fd1d001a7653fe714ed81ddd12ce55a10f4c7a25b550d529130807","type":"binary"}]},{"relative_path":"Base.lproj/Main.storyboardc/Info.plist","size":253,"shasum":"262b3f5796cad5efaa0a37d8e559f09dd2df587559cdfd02316990a58e562336","type":"binary"},{"relative_path":"Base.lproj/Main.storyboardc/SettingsSelectionVC.nib","size":2210,"shasum":"7643aacff05fb577bd536c6f0690b5396b67a7825ed845b6c069ad944d45e335","type":"directory","children":[{"relative_path":"Base.lproj/Main.storyboardc/SettingsSelectionVC.nib/objects-14.0+.nib","size":1105,"shasum":"1c48e8ab2acbaa3d4ce6f95d6013d1c00f0cbac8751648c942e9c83bbc7989d3","type":"binary"},{"relative_path":"Base.lproj/Main.storyboardc/SettingsSelectionVC.nib/runtime.nib","size":1105,"shasum":"1c48e8ab2acbaa3d4ce6f95d6013d1c00f0cbac8751648c942e9c83bbc7989d3","type":"binary"}]},{"relative_path":"Base.lproj/Main.storyboardc/tabBarController.nib","size":7830,"shasum":"a63c2871111069b1d7dbf362c66fea5d638cb45c540dc0224b86df3acf5232f6","type":"directory","children":[{"relative_path":"Base.lproj/Main.storyboardc/tabBarController.nib/objects-14.0+.nib","size":3194,"shasum":"bf9399e28efdd8f17bdc806d188ebcc53f1377d4f867ff251275d9937552e8fa","type":"binary"},{"relative_path":"Base.lproj/Main.storyboardc/tabBarController.nib/runtime.nib","size":4636,"shasum":"ca8587c8b9f469cf99218a8f3d41b891384458887185c991d7c722df231a832a","type":"binary"}]}]}]},{"relative_path":"HexaCalc","size":419136,"shasum":"746d3b91dc5fe7d6bf37cddfef8f389354643e7ed264923664426f0290b04e89","type":"binary"},{"relative_path":"HexaCalc.momd","size":1518,"shasum":"6575a10328c24fa34f0e9731258403979d753ade25ddee116dad6829ac6bdd5b","type":"directory","children":[{"relative_path":"HexaCalc.momd/HexaCalc.mom","size":566,"shasum":"9cac4edbcc37cac0d3f74fec3332d2ccdab4c290e1b0b51c890fc1445a41313e","type":"binary"},{"relative_path":"HexaCalc.momd/HexaCalc.omo","size":704,"shasum":"1770e5fae75f1fc2218e8d1a0f508c9acf255504d480aba15830d3211d8715be","type":"binary"},{"relative_path":"HexaCalc.momd/VersionInfo.plist","size":248,"shasum":"e704074948eeec6b450ce2d6a8a4d4cc29883bbf0dd5ae90b9ad019bcbc8cc6a","type":"binary"}]},{"relative_path":"Info.plist","size":1890,"shasum":"59d30b64716aedd6a960a61b38d48426dc5ccc40db9cfa96d2beb3a00165dc6e","type":"binary"},{"relative_path":"PkgInfo","size":8,"shasum":"82502191c9484b04d685374f9879a0066069c49b8acae7a04b01d38d07e8eca0","type":"binary"},{"relative_path":"SwitchTableViewCell.nib","size":2450,"shasum":"ce1bdbc7620d568f7ac0867a4914bbb45e31bf854a91bc6512d2e17095b56833","type":"binary"},{"relative_path":"_CodeSignature","size":9027,"shasum":"4136f4900b06466e9f03f20180b9e4f27b74e9cd45190196c7f6fcd809fadb13","type":"directory","children":[{"relative_path":"_CodeSignature/CodeResources","size":9027,"shasum":"57951244b89eca6a38f617397fa90b9100400f7cc50c4b8f27b5f83e36edbc51","type":"binary"}]},{"relative_path":"embedded.mobileprovision","size":41978,"shasum":"a13323f7ac87b29849b13bc9028ed87259ee6eccfc76595b85f252ab59d29da6","type":"binary"},{"relative_path":"logo.png","size":19037,"shasum":"d532376fcd38ca2d24f08e318225291588ad38c6b8def2127c8fab86b6577626","type":"binary"}]};


function formatSize(bytes) {
  if (bytes === 0) return '0 B';
  const k = 1024;
  const sizes = ['B', 'KB', 'MB', 'GB'];
  const i = Math.floor(Math.log(bytes) / Math.log(k));
  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
}


function calculateTypeBreakdown(node) {
  const breakdown = {};
  
  function processNode(node) {
    const type = node.type || 'unknown';
    breakdown[type] = (breakdown[type] || 0) + node.size;
    
    if (node.children) {
      node.children.forEach(processNode);
    }
  }
  
  processNode(node);
  return breakdown;
}


function updateInsights() {
  let largestFile = { size: 0 };
  let assetCatalogSize = 0;
  let binarySize = 0;
  let resourceCount = 0;
  
  function processNode(node) {
    if (node.size > largestFile.size) {
      largestFile = node;
    }
    
    if (node.type === 'asset_catalog') {
      assetCatalogSize += node.size;
    } else if (node.type === 'binary') {
      binarySize += node.size;
    }
    
    if (!node.children) {
      resourceCount++;
    }
    
    if (node.children) {
      node.children.forEach(processNode);
    }
  }
  
  processNode(fileTree);
  
  document.getElementById('largestFile').textContent = formatSize(largestFile.size);
  document.getElementById('assetCatalogSize').textContent = formatSize(assetCatalogSize);
  document.getElementById('binarySize').textContent = formatSize(binarySize);
  document.getElementById('resourceCount').textContent = resourceCount;
}


function updateBreakdown() {
  const breakdown = calculateTypeBreakdown(fileTree);
  const totalSize = fileTree.size;
  const breakdownList = document.getElementById('typeBreakdown');
  breakdownList.innerHTML = '';
  
  Object.entries(breakdown)
    .sort((a, b) => b[1] - a[1])
    .forEach(([type, size]) => {
      const percentage = (size / totalSize * 100).toFixed(1);
      const li = document.createElement('li');
      li.className = 'breakdown-item';
      li.innerHTML = `
        <span class="breakdown-type">${type}</span>
        <div class="breakdown-bar">
          <div class="breakdown-bar-fill" style="width: ${percentage}%"></div>
        </div>
        <span class="breakdown-size">${formatSize(size)}</span>
      `;
      breakdownList.appendChild(li);
    });
}


document.querySelectorAll('.tab').forEach(tab => {
  tab.addEventListener('click', () => {
    
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    
    
    tab.classList.add('active');
    const contentId = tab.getAttribute('data-tab');
    document.getElementById(contentId).classList.add('active');
  });
});


function flatten(node, parentLabel, labels, parents, values, types) {
  const name = node.relative_path.split('/').pop();
  const label = (parentLabel === null) ? "MyApp" : name;
  labels.push(label);
  parents.push(parentLabel === null ? "" : parentLabel);
  values.push(node.size);
  types.push(node.type);
  if (node.children) {
    for (const child of node.children) {
      flatten(child, label, labels, parents, values, types);
    }
  }
}

const labels = [], parents = [], values = [], types = [];
flatten(fileTree, null, labels, parents, values, types);


const colorMap = {
  directory: "#b0b4ff",
  binary: "#a5d8ff",
  asset_catalog: "#ffe066",
  "": "#ddd"
};
const markerColors = types.map(type => colorMap[type] || "#ddd");

const data = [{
  type: "treemap",
  labels,
  parents,
  values,
  branchvalues: 'total',
  textinfo: 'label+value',
  outsidetextfont: { size: 14, color: "#888" },
  leaf: { opacity: 0.8 },
  marker: { colors: markerColors },
  maxdepth: 5,
  pathbar: {
    visible: true,
    textfont: {
      size: 12,
      color: "#000"
    },
    side: "top",
    thickness: 25
  }
}];


function initChart() {
  const chartDiv = document.getElementById('chart');
  const layout = {
    margin: { l: 0, r: 0, b: 0, t: 32 },
    width: chartDiv.clientWidth,
    height: 700,
    uniformtext: {
      minsize: 10
    }
  };

  const config = {
    displayModeBar: false,
    responsive: true
  };

  Plotly.newPlot('chart', data, layout, config);
}


initChart();
window.addEventListener('resize', initChart);
updateBreakdown();
updateInsights();


document.getElementById('chart').on('plotly_click', function(data) {
  const clickedLabel = data.points[0].label;
  console.log('Clicked label:', clickedLabel);
});
</script>
</body>
</html>